!function(o){o.extend({openCalendar:function(t){!function(){function e(e,n,a){o("#showCalendar .calendar ul").html("");var l=n,r=e,p=l+1,s=r+1;for(0==r&&(r=12,l-=1),r>12&&(r=1,l+=1),u[1]=l%4==0&&l%100!=0||l%400==0?29:28,o(".currentYear").val(l),o(".currentMonth").val(parseInt(r)),o(".currentYear option[value='"+l+"']").attr("selected","selected").siblings().removeAttr("selected"),o(".currentMonth option[value='"+r+"']").attr("selected","selected").siblings().removeAttr("selected"),j=0;j<c.length;j++)o("#showCalendar .calendar ul").append("<li class='week'>"+c[j]+"</li>");var v=new Date(l,r-1,1),w=v.getDay(),m=new Date(p,s-1,1);for(m.getDay(),i=0;i<w;i++)o("#showCalendar .monthFirst ul").append("<li>&nbsp;</li>");var C=u[r-1];for(u[s-1],i=1;i<=C;i++)o("#showCalendar .monthFirst ul").append("<li><a href='javascript:;' title='"+l+"-"+r+"-"+i+"'>"+i+"</a></li>");r==parseInt(h)&&n==parseInt(d)&&(o("#showCalendar .monthFirst ul li a").removeClass("active"),o("#showCalendar .monthFirst ul li a").eq(parseInt(f)-1).addClass("active")),o("#showCalendar .calendar li").click(function(){if(null!=o(this).find("a").html()){var e=o(this).find("a").attr("title");o(t).val(e),o("#showCalendar").remove()}})}var n,a,l=new Date,r=l.getFullYear(),p=l.getMonth(),s=l.getDate(),c=new Array("日","一","二","三","四","五","六"),u=new Array(31,28,31,30,31,30,31,31,30,31,30,31);0!=o("body").find("#showCalendar").length?o("#showCalendar").show():(o("body").append("<div id='showCalendar'></div>"),o("#showCalendar").show().html("<div class='calendar monthFirst'><div class='current-date'><a href='#' id='preY' title='上一年'> << </a><a href='#' id='pre' title='上一月'> < </a><a href='#' id='nextY' title='下一年'> >> </a><a href='#' id='next' title='下一月'> > </a><select class='currentYear'><option value='1990'>1990年</option><option value='1991'>1991年</option><option value='1992'>1992年</option><option value='1993'>1993年</option><option value='1994'>1994年</option><option value='1995'>1995年</option><option value='1996'>1996年</option><option value='1997'>1997年</option><option value='1998'>1998年</option><option value='1999'>1999年</option><option value='2000'>2000年</option><option value='2001'>2001年</option><option value='2002'>2002年</option><option value='2003'>2003年</option><option value='2004'>2004年</option><option value='2005'>2005年</option><option value='2006'>2006年</option><option value='2007'>2007年</option><option value='2008'>2008年</option><option value='2009'>2009年</option><option value='2010'>2010年</option><option value='2011'>2011年</option><option value='2012'>2012年</option><option value='2013'>2013年</option><option value='2014'>2014年</option><option value='2015'>2015年</option><option value='2016'>2016年</option><option value='2017'>2017年</option><option value='2018'>2018年</option><option value='2019'>2019年</option><option value='2020'>2020年</option><option value='2021'>2021年</option><option value='2022'>2022年</option><option value='2023'>2023年</option><option value='2024'>2024年</option><option value='2025'>2025年</option></select><select class='currentMonth'><option value='1'>1月</option><option value='2'>2月</option><option value='3'>3月</option><option value='4'>4月</option><option value='5'>5月</option><option value='6'>6月</option><option value='7'>7月</option><option value='8'>8月</option><option value='9'>9月</option><option value='10'>10月</option><option value='11'>11月</option><option value='12'>12月</option></select></div><ul></ul><p class='databtnlist'><span class='today'>今天</span><span class='closecalendar'>关闭</span></p></div>"));var v=o(t).val().split("-"),d=v[0],h=v[1],f=v[2];e(h,d,f);var w=parseInt(o(".currentYear option:first").val()),m=parseInt(o(".currentYear option:last").val());o("#preY").click(function(){n=parseInt(o(".currentYear option:selected").val()),a=parseInt(o(".currentMonth option:selected").val()),year=n-1,year<w||e(a,year)}),o("#nextY").click(function(){n=parseInt(o(".currentYear option:selected").val()),a=parseInt(o(".currentMonth option:selected").val()),year=n+1,year>m||e(a,year)}),o("#pre").click(function(){n=parseInt(o(".currentYear option:selected").val()),a=parseInt(o(".currentMonth option:selected").val()),monthNum=a-1,0==monthNum&&n==w||e(monthNum,n)}),o("#next").click(function(){n=parseInt(o(".currentYear option:selected").val()),a=parseInt(o(".currentMonth option:selected").val()),monthNum=a+1,monthNum>12&&n==m||e(monthNum,n)}),o(".currentYear").change(function(){n=parseInt(o(this).find("option:selected").val()),a=parseInt(o(".currentMonth option:selected").val()),e(a,n)}),o(".currentMonth").change(function(){n=parseInt(o(".currentYear option:selected").val()),a=parseInt(o(this).find("option:selected").val()),e(a,n)}),o(".cleartime").click(function(){o(t).val("")});var C=r+"-"+(p+1)+"-"+s;o(".databtnlist .today").click(function(){o(t).val(C);var n=r,a=(p+1).toString(),i=s;e(a,n,i),o("#showCalendar .monthFirst ul li a").removeClass("active"),o("#showCalendar .monthFirst ul li a").eq(parseInt(i)-1).addClass("active")}),o(".closecalendar").click(function(){o("#showCalendar").remove()}),o(document).click(function(){o("#showCalendar").remove()}),o(t).click(function(o){o.stopPropagation()}),o("#showCalendar").click(function(o){o.stopPropagation()});var g,I,Y,y,k=o(window).width(),M=o(window).height(),F=o(t).outerHeight(),b=(o(t).outerWidth(),o(t).offset().left),x=o(t).offset().top,D=o("#showCalendar").height(),N=o("#showCalendar").width();I=M-x,Y=k-b,M>D?x>D?(g=x-D-5,o("#showCalendar").css({top:g})):x<=D&&I>D?(g=x+F+5,o("#showCalendar").css({top:g})):x<=D&&I<D&&(g="50%",o("#showCalendar").css({top:g,"margin-top":-D/2+"px"})):o("#showCalendar").css({top:0}),k>N?Y>N?(y=b,o("#showCalendar").css({left:y})):Y<=N&&b>N?(y=b-N,o("#showCalendar").css({left:y})):Y<=N&&b<N&&(y="50%",o("#showCalendar").css({left:y,"margin-left":-N/2+"px"})):o("#showCalendar").css({left:0})}()}})}(jQuery);