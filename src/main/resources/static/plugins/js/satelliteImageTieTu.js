function addtietuMap(e){var t=JSON.parse(e.range),a=getImageBbox(t);tietuLayerMap.put(e.dataId+"thumbnailLayer",new OpenLayers.Layer.Image(e.dataId+"thumbnailLayer",api.cloudHost+"/getImage?filepath="+e.thumbnail_path+"&name="+e.name,a,new OpenLayers.Size(1,1),{isBaseLayer:!1,displayInLayerSwitcher:!0}))}function removetietu(){var e=tietuLayerMap.toArray();console.log("removetietu"),console.log("tietuLayerArray.length:"+e.length);for(var t=0;t<e.length;t++)satelliteImage.map.getLayersByName(tietuLayerMap.arr[t].key).length>0&&removeonetietu(tietuLayerMap.arr[t].key);tietuLayerMap=new Map}function removeonetietu(e){satelliteImage.map.getLayersByName(e).length>0&&satelliteImage.map.removeLayer(tietuLayerMap.get(e))}function settietuUrlNaddLayer(e){var t=tietuLayerMap.get(e);if(console.log(t.url),!t.url){var a=t.url;t.setUrl(a),tietuLayerMap.put(e,t),map.addLayers([tietuLayerMap.get(e)])}satelliteImage.map.addLayers([tietuLayerMap.get(e)])}function getImageBbox(e){for(var t=e.coordinates[0][0],a=0,r=0,i=0,u=0,n=0;n<t.length;n++)0==n?(a=t[n][1],r=t[n][1],i=t[n][0],u=t[n][0]):(t[n][1]>=a&&(a=t[n][1]),t[n][1]<=r&&(r=t[n][1]),t[n][0]>=i&&(i=t[n][0]),t[n][0]<=u&&(u=t[n][0]));return new OpenLayers.Bounds([u,r,i,a])}function tietuYesNo(e,t){var a=t.replace("thumbnailLayer","");e.hasClass("active")?(e.removeClass("active"),e.attr("title","点击隐藏贴图"),satelliteImage.map.removeLayer(tietuLayerMap.get(t)),tietushowMap&&tietushowMap.remove(a)):(e.addClass("active"),e.attr("title","点击显示贴图"),settietuUrlNaddLayer(t),tietushowMap&&tietushowMap.put(a,a))}function tietuYesNo4Standard(e,t){tietuYesNo(e,t),$(e).hasClass("active")?$(e).attr("title","点击隐藏贴图"):$(e).attr("title","点击显示贴图")}var tietuLayerMap=new Map;