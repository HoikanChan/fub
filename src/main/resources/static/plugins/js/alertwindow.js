!function(){function t(s){o=this,this.options=$.extend({},t.DEFAULT,s),this.dragingFlag=!1,this.moveX=0,this.moveY=0,this.appendAdw(this.options.hasMask),this.appendBtn(this.options.type),this.setAwPosition(),this.setTitleCursor(this.options.isDraging),this.options.isDraging&&($(".aw-title").on("mousedown",function(t){o.moveDown(t)}),$(document).on("mousemove",function(t){o.moveBox(t)}),$(document).on("mouseup",function(t){o.moveUp()})),$(window).resize(function(t){o.setAwPosition()}),e=function(){"function"==typeof o.options.closeCallback&&o.closeAw()},n=function(){"function"==typeof o.options.closeCallback&&(o.closeAw(),o.options.closeCallback())},i=function(){"function"==typeof o.options.callback&&(o.closeAw(),o.options.callback())}}var o,n=function(){},i=function(){},e=function(){};$(document).on("click","#alert-window .modal-close-btn",function(){n()}),$(document).on("click","#alert-window .aw-close",function(){e()}),$(document).on("click","#alert-window .modal-confirm-btn",function(){i()}),$(document).on("click","#mask",function(){e()}),t.DEFAULT={el:"",width:400,title:"",msg:"",height:"",theme:"",type:"confirm",isDraging:!1,hasMask:!0,okText:"确认",closeText:"取消",callback:function(){},closeCallback:function(){}},t.prototype={setAw:function(t,o,n,i,e,s,a){if(i){var c,l=i.substr(0,1),d=i.substr(1,i.length);if("."!==l&&"#"!==l)return;c="."===l?"class='"+d+"'":"id='"+d+"'";var w=$(i).html();w||(w="")}return"<div id='alert-window' style='"+(t?"width:"+t+"px;":"")+(o?"height:"+o+"px;":"")+"'><div class='aw-title"+s+"'><h4>"+n+"</h4><span class='aw-close glyphicon glyphicon-remove'></span></div><div class='aw-content'>"+(i?"<div "+c+">"+w+"</div>":"<span class='msg'>"+e+"</span>")+"</div>"+("none"!=a?"<div class='aw-btn' style='text-align: center'></div>":"")+"</div>"},appendAdw:function(t){var o=this.options;t?($("body").append("<div id='mask'></div>"),$("body").append(this.setAw(o.width,o.height,o.title,o.el,o.msg,o.theme,o.type))):$("body").append(this.setAw(o.width,o.height,o.title,o.el,o.msg,o.theme,o.type)),$("#mask").height($(document).height())},appendBtn:function(t){var o=this.options;if("none"!=t){var n='<a class="modal-close-btn">'+o.okText+"</a>",i='<a class="modal-close-btn m-l-r-20">'+o.closeText+'</a><a class="modal-confirm-btn m-l-l-20">'+o.okText+"</a>";"confirm"==t?$(".aw-btn").append(i):"alert"==t&&$(".aw-btn").append(n)}},setAwPosition:function(){var t=$(window).width(),o=$(window).height(),n=($(window).scrollTop(),$(window).scrollLeft(),$("#alert-window").width()),i=$("#alert-window").height(),e=(t-n)/2,s=(o-i)/2;$("#alert-window").css({left:e,top:s})},closeAw:function(){$("#mask").remove(),$("#alert-window").remove()},setTitleCursor:function(t){if(!t)return!1;$(".aw-title").css("cursor","move")},moveDown:function(t){this.dragingFlag=!0;var o=$("#alert-window").offset(),n=o.left,i=o.top;this.moveX=t.pageX-n,this.moveY=t.pageY-i},moveBox:function(t){if(this.dragingFlag){var o=t.pageX-this.moveX,n=t.pageY-this.moveY,i=$(window).width(),e=$(document).height(),s=$("#alert-window").outerWidth(),a=$("#alert-window").outerHeight(),c=i-s,l=e-a;o=Math.min(c,Math.max(0,o)),n=Math.min(l,Math.max(0,n)),$("#alert-window").css({left:o,top:n})}},moveUp:function(){this.dragingFlag=!1}},window.AlertWindow=t}();